---
phase: 02-contact-form
plan: 02
type: execute
wave: 2
depends_on: [02-01]
files_modified: [index.html]
autonomous: false

must_haves:
  truths:
    - "Mobile menu opens and closes when hamburger button is clicked"
    - "Menu links are accessible on mobile devices"
    - "Navigation anchors scroll smoothly to sections"
  artifacts:
    - path: "index.html"
      provides: "Mobile menu toggle JavaScript"
      contains: ["mobile-menu-btn", "addEventListener", "nav-links"]
  key_links:
    - from: "mobile menu button"
      to: "nav-links visibility"
      via: "click event toggles class"
      pattern: "mobile-menu-btn.*addEventListener"
---

<objective>
Add mobile menu toggle functionality and verify the complete Phase 2 implementation.

Purpose: Ensure the landing page is fully functional on mobile devices with working navigation.
Output: Functional mobile menu and verified contact form phase.
</objective>

<execution_context>
@/home/laurent/.claude/get-shit-done/workflows/execute-plan.md
@/home/laurent/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-contact-form/02-01-SUMMARY.md
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add mobile menu toggle JavaScript</name>
  <files>index.html</files>
  <action>
Add mobile menu toggle functionality to the JavaScript section in index.html.

Note: Smooth scroll is already handled by CSS (`scroll-behavior: smooth` on html element at line 25), so no JavaScript needed for JS-02.

JavaScript to add:
```javascript
// Mobile menu toggle
const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
const navLinks = document.querySelector('.nav-links');

mobileMenuBtn.addEventListener('click', () => {
  navLinks.classList.toggle('show');
  // Update button text for accessibility
  const isOpen = navLinks.classList.contains('show');
  mobileMenuBtn.textContent = isOpen ? '✕' : '☰';
  mobileMenuBtn.setAttribute('aria-expanded', isOpen);
});

// Close menu when clicking a link
navLinks.querySelectorAll('a').forEach(link => {
  link.addEventListener('click', () => {
    navLinks.classList.remove('show');
    mobileMenuBtn.textContent = '☰';
    mobileMenuBtn.setAttribute('aria-expanded', 'false');
  });
});
```

CSS to add for mobile menu visibility:
```css
/* Mobile menu styles */
@media (max-width: 768px) {
  .nav-links {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--background);
    flex-direction: column;
    padding: 1rem 2rem;
    border-bottom: 2px solid var(--secondary);
    display: none;
  }
  .nav-links.show {
    display: flex;
  }
  .mobile-menu-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--secondary);
  }
}
```

Also add aria-expanded to the mobile menu button in HTML:
```html
<button class="mobile-menu-btn" aria-expanded="false" aria-label="Menu">☰</button>
```
  </action>
  <verify>
1. Resize browser to mobile width (< 768px)
2. Verify hamburger menu button is visible
3. Click button - verify nav links appear
4. Click a link - verify menu closes and page scrolls to section
5. Click button again - verify menu toggles correctly
  </verify>
  <done>
Mobile menu toggle works: button shows/hides nav links, closes on link click, button text updates.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 2: Contact Form implementation including:
- Contact section with form (nom, email, telephone, etablissement, type, message)
- Toggle buttons for Restaurateur/Apporteur d'affaires selection
- Client-side form validation with error messages
- Success message on valid submission
- Mobile menu toggle functionality
  </what-built>
  <how-to-verify>
Open index.html in browser and test:

**Desktop (> 768px):**
1. Click "Let's Go!" or "Affiliation" -> verify smooth scroll to sections
2. Scroll to #contact section -> verify form is visible with two-column layout
3. Click "Apporteur d'affaires" toggle -> verify:
   - Button becomes active
   - Etablissement asterisk disappears
   - Message placeholder changes
4. Submit empty form -> verify:
   - Error messages under nom, email, telephone fields
   - Red borders on invalid fields
   - Focus moves to first error (nom)
5. Fill nom, invalid email, submit -> verify email error
6. Fill valid email, invalid phone (e.g., "123"), submit -> verify phone error
7. Fix phone (e.g., "06 12 34 56 78"), blur -> verify error clears
8. Submit valid form -> verify success message replaces form

**Mobile (< 768px):**
9. Resize browser or use DevTools mobile view
10. Verify hamburger button visible, nav links hidden
11. Click hamburger -> verify nav links appear
12. Click "Contact" link -> verify menu closes and scrolls to contact
13. Verify form is single column on mobile

**Expected behavior:**
- All navigation anchors work with smooth scroll
- Form validation catches all errors before submission
- Toggle buttons properly control etablissement requirement
- Mobile menu is fully functional
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 2 complete verification:
1. Contact section visible at #contact anchor
2. Form has all required fields
3. Type toggle buttons work
4. Validation prevents incomplete submissions
5. Mobile menu toggle functional
6. Smooth scroll works (via CSS)

Requirements coverage:
- CTT-01: Section contact visible avec ancre #contact - YES
- CTT-02: Formulaire avec champs - YES
- CTT-03: Selecteur type - YES
- CTT-04: Champ message - YES
- CTT-05: Validation cote client - YES
- CTT-06: Message de succes - YES (mock submission)
- JS-01: Menu mobile toggle - YES
- JS-02: Scroll smooth - YES (CSS handles this)
</verification>

<success_criteria>
- [ ] Mobile menu button toggles nav links visibility
- [ ] Menu closes when link is clicked
- [ ] Button text changes between hamburger and X
- [ ] User approves full Phase 2 implementation
</success_criteria>

<output>
After completion, create `.planning/phases/02-contact-form/02-02-SUMMARY.md`
</output>
